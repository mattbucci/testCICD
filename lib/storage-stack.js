"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StorageStack = void 0;
const cdk = require("@aws-cdk/core");
const s3 = require("@aws-cdk/aws-s3");
const aws_efs_1 = require("@aws-cdk/aws-efs");
class StorageStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        this.efsAccessSecurityGroup = props.efsAccessSecurityGroup;
        this.OAI = props.OAI;
        // EFS Storage
        this.EFSInstance = new aws_efs_1.FileSystem(this, 'Wordpress_EFS', {
            vpc: props.vpc,
            encrypted: true,
            performanceMode: aws_efs_1.PerformanceMode.GENERAL_PURPOSE,
            throughputMode: aws_efs_1.ThroughputMode.BURSTING
        });
        this.EFSInstance.connections.allowDefaultPortFrom(this.efsAccessSecurityGroup);
        this.S3Bucket = new s3.Bucket(this, 'Wordpress_S3', {
            removalPolicy: cdk.RemovalPolicy.DESTROY,
        });
    }
}
exports.StorageStack = StorageStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS1zdGFjay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN0b3JhZ2Utc3RhY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEscUNBQXFDO0FBQ3JDLHNDQUFzQztBQUN0Qyw4Q0FBK0U7QUFVL0UsTUFBYSxZQUFhLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFNdkMsWUFBWSxLQUFvQixFQUFFLEVBQVUsRUFBRSxLQUF3QjtRQUNsRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixJQUFJLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDLHNCQUFzQixDQUFDO1FBQzNELElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUVyQixjQUFjO1FBQ2QsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLG9CQUFVLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRTtZQUNyRCxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUc7WUFDZCxTQUFTLEVBQUUsSUFBSTtZQUNmLGVBQWUsRUFBRSx5QkFBZSxDQUFDLGVBQWU7WUFDaEQsY0FBYyxFQUFFLHdCQUFjLENBQUMsUUFBUTtTQUMxQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUUvRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFO1lBQ2hELGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxDQUFDLE9BQU87U0FDM0MsQ0FBQyxDQUFBO0lBQ04sQ0FBQztDQUNKO0FBekJELG9DQXlCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcCwgRHVyYXRpb24sIFN0YWNrLCBTdGFja1Byb3BzIH0gZnJvbSBcIkBhd3MtY2RrL2NvcmVcIjtcbmltcG9ydCB7IEluc3RhbmNlQ2xhc3MsIEluc3RhbmNlU2l6ZSwgSW5zdGFuY2VUeXBlLCBQZWVyLCBTdWJuZXRUeXBlLCBWcGMgfSBmcm9tIFwiQGF3cy1jZGsvYXdzLWVjMlwiO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0ICogYXMgczMgZnJvbSBcIkBhd3MtY2RrL2F3cy1zM1wiO1xuaW1wb3J0IHsgRmlsZVN5c3RlbSwgUGVyZm9ybWFuY2VNb2RlLCBUaHJvdWdocHV0TW9kZSB9IGZyb20gJ0Bhd3MtY2RrL2F3cy1lZnMnO1xuaW1wb3J0IHsgT3JpZ2luQWNjZXNzSWRlbnRpdHkgfSBmcm9tIFwiQGF3cy1jZGsvYXdzLWNsb3VkZnJvbnRcIjtcbmltcG9ydCB7IFNlY3VyaXR5R3JvdXAgfSBmcm9tIFwiQGF3cy1jZGsvYXdzLWVjMi9saWJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTdG9yYWdlU3RhY2tQcm9wcyBleHRlbmRzIFN0YWNrUHJvcHMge1xuICAgIHZwYzogVnBjO1xuICAgIGVmc0FjY2Vzc1NlY3VyaXR5R3JvdXA6IFNlY3VyaXR5R3JvdXAsXG4gICAgT0FJOiBPcmlnaW5BY2Nlc3NJZGVudGl0eVxufVxuXG5leHBvcnQgY2xhc3MgU3RvcmFnZVN0YWNrIGV4dGVuZHMgY2RrLlN0YWNrIHtcbiAgICByZWFkb25seSBFRlNJbnN0YW5jZTogRmlsZVN5c3RlbTtcbiAgICByZWFkb25seSBTM0J1Y2tldDogczMuQnVja2V0O1xuICAgIHJlYWRvbmx5IE9BSTogT3JpZ2luQWNjZXNzSWRlbnRpdHk7XG4gICAgcmVhZG9ubHkgZWZzQWNjZXNzU2VjdXJpdHlHcm91cDogU2VjdXJpdHlHcm91cDtcblxuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiBjZGsuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogU3RvcmFnZVN0YWNrUHJvcHMpIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5lZnNBY2Nlc3NTZWN1cml0eUdyb3VwID0gcHJvcHMuZWZzQWNjZXNzU2VjdXJpdHlHcm91cDtcbiAgICAgICAgdGhpcy5PQUkgPSBwcm9wcy5PQUk7XG5cbiAgICAgICAgLy8gRUZTIFN0b3JhZ2VcbiAgICAgICAgdGhpcy5FRlNJbnN0YW5jZSA9IG5ldyBGaWxlU3lzdGVtKHRoaXMsICdXb3JkcHJlc3NfRUZTJywge1xuICAgICAgICAgICAgdnBjOiBwcm9wcy52cGMsXG4gICAgICAgICAgICBlbmNyeXB0ZWQ6IHRydWUsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZU1vZGU6IFBlcmZvcm1hbmNlTW9kZS5HRU5FUkFMX1BVUlBPU0UsXG4gICAgICAgICAgICB0aHJvdWdocHV0TW9kZTogVGhyb3VnaHB1dE1vZGUuQlVSU1RJTkdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuRUZTSW5zdGFuY2UuY29ubmVjdGlvbnMuYWxsb3dEZWZhdWx0UG9ydEZyb20odGhpcy5lZnNBY2Nlc3NTZWN1cml0eUdyb3VwKTtcblxuICAgICAgICB0aGlzLlMzQnVja2V0ID0gbmV3IHMzLkJ1Y2tldCh0aGlzLCAnV29yZHByZXNzX1MzJywge1xuICAgICAgICAgICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAgICAgICAgfSlcbiAgICB9XG59XG5cblxuIl19